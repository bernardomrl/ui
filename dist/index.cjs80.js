"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const ke=require("react");function Oe(r){const a=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(r){for(const l in r)if(l!=="default"){const u=Object.getOwnPropertyDescriptor(r,l);Object.defineProperty(a,l,u.get?u:{enumerable:!0,get:()=>r[l]})}}return a.default=r,Object.freeze(a)}const t=Oe(ke);var Re=Object.defineProperty,Te=Object.defineProperties,De=Object.getOwnPropertyDescriptors,J=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable,de=(r,a,l)=>a in r?Re(r,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[a]=l,je=(r,a)=>{for(var l in a||(a={}))fe.call(a,l)&&de(r,l,a[l]);if(J)for(var l of J(a))me.call(a,l)&&de(r,l,a[l]);return r},We=(r,a)=>Te(r,De(a)),Ae=(r,a)=>{var l={};for(var u in r)fe.call(r,u)&&a.indexOf(u)<0&&(l[u]=r[u]);if(r!=null&&J)for(var u of J(r))a.indexOf(u)<0&&me.call(r,u)&&(l[u]=r[u]);return l};function Be(r){let a=setTimeout(r,0),l=setTimeout(r,10),u=setTimeout(r,50);return[a,l,u]}function _e(r){let a=t.useRef();return t.useEffect(()=>{a.current=r}),a.current}var Ie=18,ve=40,Fe=`${ve}px`,He=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Le({containerRef:r,inputRef:a,pushPasswordManagerStrategy:l,isFocused:u}){let[M,p]=t.useState(!1),[I,x]=t.useState(!1),[j,F]=t.useState(!1),H=t.useMemo(()=>l==="none"?!1:(l==="increase-width"||l==="experimental-no-flickering")&&M&&I,[M,I,l]),W=t.useCallback(()=>{let m=r.current,y=a.current;if(!m||!y||j||l==="none")return;let h=m,S=h.getBoundingClientRect().left+h.offsetWidth,A=h.getBoundingClientRect().top+h.offsetHeight/2,i=S-Ie,L=A;document.querySelectorAll(He).length===0&&document.elementFromPoint(i,L)===m||(p(!0),F(!0))},[r,a,j,l]);return t.useEffect(()=>{let m=r.current;if(!m||l==="none")return;function y(){let S=window.innerWidth-m.getBoundingClientRect().right;x(S>=ve)}y();let h=setInterval(y,1e3);return()=>{clearInterval(h)}},[r,l]),t.useEffect(()=>{let m=u||document.activeElement===a.current;if(l==="none"||!m)return;let y=setTimeout(W,0),h=setTimeout(W,2e3),S=setTimeout(W,5e3),A=setTimeout(()=>{F(!0)},6e3);return()=>{clearTimeout(y),clearTimeout(h),clearTimeout(S),clearTimeout(A)}},[a,u,l,W]),{hasPWMBadge:M,willPushPWMBadge:H,PWM_BADGE_SPACE_WIDTH:Fe}}var ge=t.createContext({}),he=t.forwardRef((r,a)=>{var l=r,{value:u,onChange:M,maxLength:p,textAlign:I="left",pattern:x,placeholder:j,inputMode:F="numeric",onComplete:H,pushPasswordManagerStrategy:W="increase-width",pasteTransformer:m,containerClassName:y,noScriptCSSFallback:h=Ne,render:S,children:A}=l,i=Ae(l,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),L,ee,te,ne,re;let[be,we]=t.useState(typeof i.defaultValue=="string"?i.defaultValue:""),c=u??be,k=_e(c),N=t.useCallback(e=>{M?.(e),we(e)},[M]),w=t.useMemo(()=>x?typeof x=="string"?new RegExp(x):x:null,[x]),s=t.useRef(null),K=t.useRef(null),Q=t.useRef({value:c,onChange:N,isIOS:typeof window<"u"&&((ee=(L=window?.CSS)==null?void 0:L.supports)==null?void 0:ee.call(L,"-webkit-touch-callout","none"))}),V=t.useRef({prev:[(te=s.current)==null?void 0:te.selectionStart,(ne=s.current)==null?void 0:ne.selectionEnd,(re=s.current)==null?void 0:re.selectionDirection]});t.useImperativeHandle(a,()=>s.current,[]),t.useEffect(()=>{let e=s.current,n=K.current;if(!e||!n)return;Q.current.value!==e.value&&Q.current.onChange(e.value),V.current.prev=[e.selectionStart,e.selectionEnd,e.selectionDirection];function d(){if(document.activeElement!==e){G(null),z(null);return}let o=e.selectionStart,f=e.selectionEnd,Z=e.selectionDirection,b=e.maxLength,R=e.value,E=V.current.prev,P=-1,C=-1,T;if(R.length!==0&&o!==null&&f!==null){let Ce=o===f,Me=o===R.length&&R.length<b;if(Ce&&!Me){let D=o;if(D===0)P=0,C=1,T="forward";else if(D===b)P=D-1,C=D,T="backward";else if(b>1&&R.length>1){let Y=0;if(E[0]!==null&&E[1]!==null){T=D<E[1]?"backward":"forward";let xe=E[0]===E[1]&&E[0]<b;T==="backward"&&!xe&&(Y=-1)}P=Y+D,C=Y+D+1}}P!==-1&&C!==-1&&P!==C&&s.current.setSelectionRange(P,C,T)}let se=P!==-1?P:o,pe=C!==-1?C:f,Pe=T??Z;G(se),z(pe),V.current.prev=[se,pe,Pe]}if(document.addEventListener("selectionchange",d,{capture:!0}),d(),document.activeElement===e&&U(!0),!document.getElementById("input-otp-style")){let o=document.createElement("style");if(o.id="input-otp-style",document.head.appendChild(o),o.sheet){let f="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";q(o.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),q(o.sheet,`[data-input-otp]:autofill { ${f} }`),q(o.sheet,`[data-input-otp]:-webkit-autofill { ${f} }`),q(o.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),q(o.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let v=()=>{n&&n.style.setProperty("--root-height",`${e.clientHeight}px`)};v();let g=new ResizeObserver(v);return g.observe(e),()=>{document.removeEventListener("selectionchange",d,{capture:!0}),g.disconnect()}},[]);let[le,ae]=t.useState(!1),[$,U]=t.useState(!1),[O,G]=t.useState(null),[B,z]=t.useState(null);t.useEffect(()=>{Be(()=>{var e,n,d,v;(e=s.current)==null||e.dispatchEvent(new Event("input"));let g=(n=s.current)==null?void 0:n.selectionStart,o=(d=s.current)==null?void 0:d.selectionEnd,f=(v=s.current)==null?void 0:v.selectionDirection;g!==null&&o!==null&&(G(g),z(o),V.current.prev=[g,o,f])})},[c,$]),t.useEffect(()=>{k!==void 0&&c!==k&&k.length<p&&c.length===p&&H?.(c)},[p,H,k,c]);let _=Le({containerRef:K,inputRef:s,pushPasswordManagerStrategy:W,isFocused:$}),oe=t.useCallback(e=>{let n=e.currentTarget.value.slice(0,p);if(n.length>0&&w&&!w.test(n)){e.preventDefault();return}typeof k=="string"&&n.length<k.length&&document.dispatchEvent(new Event("selectionchange")),N(n)},[p,N,k,w]),ie=t.useCallback(()=>{var e;if(s.current){let n=Math.min(s.current.value.length,p-1),d=s.current.value.length;(e=s.current)==null||e.setSelectionRange(n,d),G(n),z(d)}U(!0)},[p]),ue=t.useCallback(e=>{var n,d;let v=s.current;if(!m&&(!Q.current.isIOS||!e.clipboardData||!v))return;let g=e.clipboardData.getData("text/plain"),o=m?m(g):g;e.preventDefault();let f=(n=s.current)==null?void 0:n.selectionStart,Z=(d=s.current)==null?void 0:d.selectionEnd,b=(f!==Z?c.slice(0,f)+o+c.slice(Z):c.slice(0,f)+o+c.slice(f)).slice(0,p);if(b.length>0&&w&&!w.test(b))return;v.value=b,N(b);let R=Math.min(b.length,p-1),E=b.length;v.setSelectionRange(R,E),G(R),z(E)},[p,N,w,c]),Se=t.useMemo(()=>({position:"relative",cursor:i.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[i.disabled]),ce=t.useMemo(()=>({position:"absolute",inset:0,width:_.willPushPWMBadge?`calc(100% + ${_.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:_.willPushPWMBadge?`inset(0 ${_.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:I,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[_.PWM_BADGE_SPACE_WIDTH,_.willPushPWMBadge,I]),Ee=t.useMemo(()=>t.createElement("input",We(je({autoComplete:i.autoComplete||"one-time-code"},i),{"data-input-otp":!0,"data-input-otp-placeholder-shown":c.length===0||void 0,"data-input-otp-mss":O,"data-input-otp-mse":B,inputMode:F,pattern:w?.source,"aria-placeholder":j,style:ce,maxLength:p,value:c,ref:s,onPaste:e=>{var n;ue(e),(n=i.onPaste)==null||n.call(i,e)},onChange:oe,onMouseOver:e=>{var n;ae(!0),(n=i.onMouseOver)==null||n.call(i,e)},onMouseLeave:e=>{var n;ae(!1),(n=i.onMouseLeave)==null||n.call(i,e)},onFocus:e=>{var n;ie(),(n=i.onFocus)==null||n.call(i,e)},onBlur:e=>{var n;U(!1),(n=i.onBlur)==null||n.call(i,e)}})),[oe,ie,ue,F,ce,p,B,O,i,w?.source,c]),X=t.useMemo(()=>({slots:Array.from({length:p}).map((e,n)=>{var d;let v=$&&O!==null&&B!==null&&(O===B&&n===O||n>=O&&n<B),g=c[n]!==void 0?c[n]:null,o=c[0]!==void 0?null:(d=j?.[n])!=null?d:null;return{char:g,placeholderChar:o,isActive:v,hasFakeCaret:v&&g===null}}),isFocused:$,isHovering:!i.disabled&&le}),[$,le,p,B,O,i.disabled,c]),ye=t.useMemo(()=>S?S(X):t.createElement(ge.Provider,{value:X},A),[A,X,S]);return t.createElement(t.Fragment,null,h!==null&&t.createElement("noscript",null,t.createElement("style",null,h)),t.createElement("div",{ref:K,"data-input-otp-container":!0,style:Se,className:y},ye,t.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Ee)))});he.displayName="Input";function q(r,a){try{r.insertRule(a)}catch{console.error("input-otp could not insert CSS rule:",a)}}var Ne=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;exports.OTPInput=he;exports.OTPInputContext=ge;
//# sourceMappingURL=index.cjs80.js.map
