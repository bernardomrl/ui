{"version":3,"file":"index.cjs55.js","sources":["../node_modules/@radix-ui/react-avatar/dist/index.mjs"],"sourcesContent":["\"use client\";\n\n// src/avatar.tsx\nimport * as React from \"react\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useLayoutEffect } from \"@radix-ui/react-use-layout-effect\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { useIsHydrated } from \"@radix-ui/react-use-is-hydrated\";\nimport { jsx } from \"react/jsx-runtime\";\nvar AVATAR_NAME = \"Avatar\";\nvar [createAvatarContext, createAvatarScope] = createContextScope(AVATAR_NAME);\nvar [AvatarProvider, useAvatarContext] = createAvatarContext(AVATAR_NAME);\nvar Avatar = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAvatar, ...avatarProps } = props;\n    const [imageLoadingStatus, setImageLoadingStatus] = React.useState(\"idle\");\n    return /* @__PURE__ */ jsx(\n      AvatarProvider,\n      {\n        scope: __scopeAvatar,\n        imageLoadingStatus,\n        onImageLoadingStatusChange: setImageLoadingStatus,\n        children: /* @__PURE__ */ jsx(Primitive.span, { ...avatarProps, ref: forwardedRef })\n      }\n    );\n  }\n);\nAvatar.displayName = AVATAR_NAME;\nvar IMAGE_NAME = \"AvatarImage\";\nvar AvatarImage = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAvatar, src, onLoadingStatusChange = () => {\n    }, ...imageProps } = props;\n    const context = useAvatarContext(IMAGE_NAME, __scopeAvatar);\n    const imageLoadingStatus = useImageLoadingStatus(src, imageProps);\n    const handleLoadingStatusChange = useCallbackRef((status) => {\n      onLoadingStatusChange(status);\n      context.onImageLoadingStatusChange(status);\n    });\n    useLayoutEffect(() => {\n      if (imageLoadingStatus !== \"idle\") {\n        handleLoadingStatusChange(imageLoadingStatus);\n      }\n    }, [imageLoadingStatus, handleLoadingStatusChange]);\n    return imageLoadingStatus === \"loaded\" ? /* @__PURE__ */ jsx(Primitive.img, { ...imageProps, ref: forwardedRef, src }) : null;\n  }\n);\nAvatarImage.displayName = IMAGE_NAME;\nvar FALLBACK_NAME = \"AvatarFallback\";\nvar AvatarFallback = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeAvatar, delayMs, ...fallbackProps } = props;\n    const context = useAvatarContext(FALLBACK_NAME, __scopeAvatar);\n    const [canRender, setCanRender] = React.useState(delayMs === void 0);\n    React.useEffect(() => {\n      if (delayMs !== void 0) {\n        const timerId = window.setTimeout(() => setCanRender(true), delayMs);\n        return () => window.clearTimeout(timerId);\n      }\n    }, [delayMs]);\n    return canRender && context.imageLoadingStatus !== \"loaded\" ? /* @__PURE__ */ jsx(Primitive.span, { ...fallbackProps, ref: forwardedRef }) : null;\n  }\n);\nAvatarFallback.displayName = FALLBACK_NAME;\nfunction resolveLoadingStatus(image, src) {\n  if (!image) {\n    return \"idle\";\n  }\n  if (!src) {\n    return \"error\";\n  }\n  if (image.src !== src) {\n    image.src = src;\n  }\n  return image.complete && image.naturalWidth > 0 ? \"loaded\" : \"loading\";\n}\nfunction useImageLoadingStatus(src, { referrerPolicy, crossOrigin }) {\n  const isHydrated = useIsHydrated();\n  const imageRef = React.useRef(null);\n  const image = (() => {\n    if (!isHydrated) return null;\n    if (!imageRef.current) {\n      imageRef.current = new window.Image();\n    }\n    return imageRef.current;\n  })();\n  const [loadingStatus, setLoadingStatus] = React.useState(\n    () => resolveLoadingStatus(image, src)\n  );\n  useLayoutEffect(() => {\n    setLoadingStatus(resolveLoadingStatus(image, src));\n  }, [image, src]);\n  useLayoutEffect(() => {\n    const updateStatus = (status) => () => {\n      setLoadingStatus(status);\n    };\n    if (!image) return;\n    const handleLoad = updateStatus(\"loaded\");\n    const handleError = updateStatus(\"error\");\n    image.addEventListener(\"load\", handleLoad);\n    image.addEventListener(\"error\", handleError);\n    if (referrerPolicy) {\n      image.referrerPolicy = referrerPolicy;\n    }\n    if (typeof crossOrigin === \"string\") {\n      image.crossOrigin = crossOrigin;\n    }\n    return () => {\n      image.removeEventListener(\"load\", handleLoad);\n      image.removeEventListener(\"error\", handleError);\n    };\n  }, [image, crossOrigin, referrerPolicy]);\n  return loadingStatus;\n}\nvar Root = Avatar;\nvar Image = AvatarImage;\nvar Fallback = AvatarFallback;\nexport {\n  Avatar,\n  AvatarFallback,\n  AvatarImage,\n  Fallback,\n  Image,\n  Root,\n  createAvatarScope\n};\n//# sourceMappingURL=index.mjs.map\n"],"names":["AVATAR_NAME","createAvatarContext","createContextScope","AvatarProvider","useAvatarContext","Avatar","React","props","forwardedRef","__scopeAvatar","avatarProps","imageLoadingStatus","setImageLoadingStatus","jsx","Primitive","IMAGE_NAME","AvatarImage","src","onLoadingStatusChange","imageProps","context","useImageLoadingStatus","handleLoadingStatusChange","useCallbackRef","status","useLayoutEffect","FALLBACK_NAME","AvatarFallback","delayMs","fallbackProps","canRender","setCanRender","timerId","resolveLoadingStatus","image","referrerPolicy","crossOrigin","isHydrated","useIsHydrated","imageRef","loadingStatus","setLoadingStatus","updateStatus","handleLoad","handleError","Root","Image","Fallback"],"mappings":"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","x_google_ignoreList":[0]}