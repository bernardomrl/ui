"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const H=require("react"),m=require("./index.cjs109.js"),B=require("./index.cjs110.js"),Y=require("./index.cjs108.js"),z=require("./index.cjs103.js"),V=require("./index.cjs112.js"),j=require("./index.cjs106.js"),J=require("./index.cjs104.js"),Q=require("./index.cjs111.js"),W=require("./index.cjs113.js"),f=require("react/jsx-runtime");function X(e){const o=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const t=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(o,r,t.get?t:{enumerable:!0,get:()=>e[r]})}}return o.default=e,Object.freeze(o)}const s=X(H);var h="rovingFocusGroup.onEntryFocus",Z={bubbles:!1,cancelable:!0},b="RovingFocusGroup",[A,N,ee]=B.createCollection(b),[te,oe]=z.createContextScope(b,[ee]),[re,ne]=te(b),O=s.forwardRef((e,o)=>f.jsx(A.Provider,{scope:e.__scopeRovingFocusGroup,children:f.jsx(A.Slot,{scope:e.__scopeRovingFocusGroup,children:f.jsx(ce,{...e,ref:o})})}));O.displayName=b;var ce=s.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:r,orientation:t,loop:S=!1,dir:T,currentTabStopId:v,defaultCurrentTabStopId:w,onCurrentTabStopIdChange:x,onEntryFocus:p,preventScrollOnEntryFocus:u=!1,...g}=e,I=s.useRef(null),F=Y.useComposedRefs(o,I),R=W.useDirection(T),[E,n]=Q.useControllableState({prop:v,defaultProp:w??null,onChange:x,caller:b}),[a,C]=s.useState(!1),i=J.useCallbackRef(p),l=N(r),y=s.useRef(!1),[K,D]=s.useState(0);return s.useEffect(()=>{const c=I.current;if(c)return c.addEventListener(h,i),()=>c.removeEventListener(h,i)},[i]),f.jsx(re,{scope:r,orientation:t,dir:R,loop:S,currentTabStopId:E,onItemFocus:s.useCallback(c=>n(c),[n]),onItemShiftTab:s.useCallback(()=>C(!0),[]),onFocusableItemAdd:s.useCallback(()=>D(c=>c+1),[]),onFocusableItemRemove:s.useCallback(()=>D(c=>c-1),[]),children:f.jsx(j.Primitive.div,{tabIndex:a||K===0?-1:0,"data-orientation":t,...g,ref:F,style:{outline:"none",...e.style},onMouseDown:m.composeEventHandlers(e.onMouseDown,()=>{y.current=!0}),onFocus:m.composeEventHandlers(e.onFocus,c=>{const k=!y.current;if(c.target===c.currentTarget&&k&&!a){const G=new CustomEvent(h,Z);if(c.currentTarget.dispatchEvent(G),!G.defaultPrevented){const _=l().filter(d=>d.focusable),L=_.find(d=>d.active),U=_.find(d=>d.id===E),$=[L,U,..._].filter(Boolean).map(d=>d.ref.current);M($,u)}}y.current=!1}),onBlur:m.composeEventHandlers(e.onBlur,()=>C(!1))})})}),q="RovingFocusGroupItem",P=s.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:r,focusable:t=!0,active:S=!1,tabStopId:T,children:v,...w}=e,x=V.useId(),p=T||x,u=ne(q,r),g=u.currentTabStopId===p,I=N(r),{onFocusableItemAdd:F,onFocusableItemRemove:R,currentTabStopId:E}=u;return s.useEffect(()=>{if(t)return F(),()=>R()},[t,F,R]),f.jsx(A.ItemSlot,{scope:r,id:p,focusable:t,active:S,children:f.jsx(j.Primitive.span,{tabIndex:g?0:-1,"data-orientation":u.orientation,...w,ref:o,onMouseDown:m.composeEventHandlers(e.onMouseDown,n=>{t?u.onItemFocus(p):n.preventDefault()}),onFocus:m.composeEventHandlers(e.onFocus,()=>u.onItemFocus(p)),onKeyDown:m.composeEventHandlers(e.onKeyDown,n=>{if(n.key==="Tab"&&n.shiftKey){u.onItemShiftTab();return}if(n.target!==n.currentTarget)return;const a=ie(n,u.orientation,u.dir);if(a!==void 0){if(n.metaKey||n.ctrlKey||n.altKey||n.shiftKey)return;n.preventDefault();let i=I().filter(l=>l.focusable).map(l=>l.ref.current);if(a==="last")i.reverse();else if(a==="prev"||a==="next"){a==="prev"&&i.reverse();const l=i.indexOf(n.currentTarget);i=u.loop?ae(i,l+1):i.slice(l+1)}setTimeout(()=>M(i))}}),children:typeof v=="function"?v({isCurrentTabStop:g,hasTabStop:E!=null}):v})})});P.displayName=q;var se={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ue(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ie(e,o,r){const t=ue(e.key,r);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(t))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(t)))return se[t]}function M(e,o=!1){const r=document.activeElement;for(const t of e)if(t===r||(t.focus({preventScroll:o}),document.activeElement!==r))return}function ae(e,o){return e.map((r,t)=>e[(o+t)%e.length])}var le=O,de=P;exports.Item=de;exports.Root=le;exports.RovingFocusGroup=O;exports.RovingFocusGroupItem=P;exports.createRovingFocusGroupScope=oe;
//# sourceMappingURL=index.cjs125.js.map
